# SPDX-License-Identifier: GPL-2.0
%YAML 1.2
---
$id: http://devicetree.org/schemas/reset/kendryte,k210-rst.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Kendryte K210 Reset Controller Device Tree Bindings

maintainers:
  - Damien Le Moal <damien.lemoal@wdc.com>

description: |
  Kendryte K210 reset controller driver which support the system controller
  subsystem supplied reset registers for the various peripherals within
  the SoC.

  See also:
  - dt-bindings/reset/k210-sysctl.h

properties:
  compatible:
    allOf:
      - items:
        - const: kendryte,k210-rst
        - const: syscon-reset

  regmap:
    maxItems: 1
    description: phandle of the system controller (sysctl) node

  offset:
    maxItems: 1
    description: peripheral reset register offset in the system controller
      controller register map

  mask:
    maxItems: 1
    description: bit-mask indicating valid reset bits in the reset register

  assert-high:
    maxItems: 1
    description: bit value to write when asserting a reset

  '#reset-cells':
    const: 1

required:
  - '#reset-cells'
  - compatible
  - regmap
  - offset
  - mask
  - assert-high

additionalProperties: false

examples:
  - |
    #include <dt-bindings/mfd/k210-sysctl.h>
    #include <dt-bindings/reset/k210-sysctl.h>

    sysctl: system-controller@50440000 {
      #address-cells = <1>;
      #size-cells = <1>;
      compatible = "kendryte,k210-sysctl",
                   "syscon", "simple-mfd";
      reg = <0x50440000 0x1000>;
      /* ... */
      sysrst: reset-controller {
        compatible = "kendryte,k210-rst",
                      "syscon-reset";
        #reset-cells = <1>;
        regmap = <&sysctl>;
        offset = <K210_SYSCTL_PERI_RESET>;
        mask = <0x27FFFFFF>;
        assert-high = <1>;
      };
    };
